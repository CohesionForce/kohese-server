<mat-table *ngIf="tableStream" #actionTable [dataSource]="tableStream">
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
      <mat-cell *matCellDef="let action" 
                (click)="navigate('Explore', {id:action.proxy.item.id})">
        <ng-container *ngIf="action.proxy.model.type.viewModelProxy">
          <span class="{{action.proxy.model.type.viewModelProxy.item.icon}}"
            [ngStyle]="getRowIndent(action)">
          </span>
        </ng-container>
        {{action.proxy.item.name}}
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="predecessors">
      <mat-header-cell *matHeaderCellDef> Predecessors</mat-header-cell>
      <mat-cell *matCellDef="let action">
        <ul *ngIf="action.proxy.relations.references[action.proxy.kind]"> 
          <li *ngFor="let predecessor of action.proxy.relations.references[action.proxy.kind].predecessors"> 
            {{predecessor.item.name}}
          </li>
        </ul>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="assignedTo">
        <mat-header-cell *matHeaderCellDef> Assigned To </mat-header-cell>
        <mat-cell *matCellDef="let action"> {{action.proxy.item.assignedTo}}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="state">
        <mat-header-cell *matHeaderCellDef> State </mat-header-cell>
        <mat-cell *matCellDef="let action"> {{action.proxy.state}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="estimatedHoursEffort">
      <mat-header-cell *matHeaderCellDef> Estimated Hours </mat-header-cell>
      <mat-cell *matCellDef="let action"> 
          <editable-cell [column]="'estimatedHoursEffort'"
                         [action]="action"
                         [rowActionStream]="rowActionStream"
                         [editableStream]="editableStream"></editable-cell>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="remainingHoursEffort">
      <mat-header-cell *matHeaderCellDef> Remaining Hours </mat-header-cell>
      <mat-cell *matCellDef="let action"> 
          <editable-cell [column]="'remainingHoursEffort'"
                         [action]="action"
                         [rowActionStream]="rowActionStream"
                         [editableStream]="editableStream"></editable-cell>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="actualHoursEffort">
      <mat-header-cell *matHeaderCellDef> Actual Hours </mat-header-cell>
      <mat-cell *matCellDef="let action"> 
          <editable-cell [column]="'actualHoursEffort'"
                         [action]="action"
                         [rowActionStream]="rowActionStream"
                         [editableStream]="editableStream"></editable-cell>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="actions" *ngIf="editable">
      <mat-header-cell *matHeaderCellDef> Actions</mat-header-cell>
      <mat-cell *matCellDef="let action" style="z-index: 10">
          <button mat-icon-button class="fa fa-edit"
                  *ngIf="!editableRows[action.proxy.item.id]"
                  (click)="toggleRowEdit(action.proxy)"></button>
          <button mat-icon-button class="fa fa-close"
                  *ngIf="editableRows[action.proxy.item.id]"
                  (click)="toggleRowEdit(action.proxy)"></button>
          <button mat-icon-button class="fa fa-save" (click)="saveRow(action.proxy)"></button>
      </mat-cell>
    </ng-container>

    <mat-header-row style="position: sticky; top: 0; 
                           background-color: inherit; z-index: 1;" 
                    *matHeaderRowDef="rowDef"></mat-header-row>
    <mat-row *matRowDef="let action; columns: rowDef"></mat-row>
</mat-table>
