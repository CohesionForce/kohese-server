<div style="width: 100%;">
  <div class="journal-entry"
    [ngClass]="{ 'issue': ('Issue' === itemProxy.kind) }">
    <span style="margin-left: auto;">
      <button mat-icon-button matTooltip="Journal Against This"
        [ngClass]="{ 'highlight': (journalTargetId === itemProxy.item.id) }"
        (click)="setJournalTarget()">
        <mat-icon class="fa fa-reply"></mat-icon>
      </button>
      <ng-container
        *ngIf="itemProxy.item.createdBy === (sessionService.getSessionUser() | async)?.item.name">
        <ng-container *ngIf="!inEditMode">
          <button mat-icon-button matTooltip="Edit" (click)="inEditMode = true">
            <mat-icon class="fa fa-edit"></mat-icon>
          </button>
        </ng-container>
        <ng-container *ngIf="inEditMode">
          <button mat-icon-button matTooltip="Save Changes" (click)="save()">
            <mat-icon class="fa fa-save"></mat-icon>
          </button>
          <button mat-icon-button matTooltip="Cancel" (click)="cancelEditing()">
            <mat-icon class="fa fa-times"></mat-icon>
          </button>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="!inEditMode">
        <button mat-icon-button matTooltip="Show in Explore"
          (click)="navigationService.navigate('Explore', { id: itemProxy.item.id })">
          <mat-icon class="fa fa-arrow-right"></mat-icon>
        </button>
      </ng-container>
    </span>
    <div id="journalEntryContentContainer">
      <h5>
        {{itemProxy.item.name}}
      </h5>
      <div>
        Added by {{itemProxy.item.createdBy}} on {{(itemProxy.item.createdOn | date:'long')}}
      </div>
      <div>
        Observed by {{itemProxy.item.observedBy}} on {{(itemProxy.item.observedOn | date:'long')}}
      </div>
      <ng-container *ngIf="inEditMode">
        <textarea matInput #editInput placeholder="Description" cols="80" rows="3"
          [(ngModel)]="editText"></textarea>
      </ng-container>
      <ng-container *ngIf="!inEditMode">
        <label>{{itemProxy.item.description}}</label>
      </ng-container>
      <ng-container *ngIf="'Issue' === itemProxy.kind">
        <div>
          State: {{itemProxy.item.issueState}}
        </div>
        <ng-container *ngIf="itemProxy.item.response">
          <div>
            Response: {{itemProxy.item.response}}
          </div>
        </ng-container>
      </ng-container>
    </div>
  </div>
  <hr/>
</div>
