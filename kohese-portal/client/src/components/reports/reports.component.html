<div style="height: 100%; width: 100%; padding: 3px;">
  <h3>
    Reports
  </h3>
  <mat-accordion multi="true">
    <ng-container *ngFor="let reportObject of Array.from(reports.keys())">
      <mat-expansion-panel (opened)="retrieveSavedReportPreview(
        reportObject)">
        <mat-expansion-panel-header>
          <mat-panel-title style="align-items: center;">
            {{reportObject.name}}
          </mat-panel-title>
          <span class="flex-right-align">
            <button mat-icon-button matTooltip="Report Information"
              (click)="getReportInformation(reportObject); $event.
              stopPropagation()">
              <mat-icon class="fa fa-info-circle"></mat-icon>
            </button>
            <button mat-icon-button matTooltip="Rename this report"
              (click)="renameReport(reportObject.name); $event.
              stopPropagation()">
              <mat-icon class="fa fa-i-cursor"></mat-icon>
            </button>
            <a #reportDownloadAnchor style="display: none;"
              download="{{reportObject.name}}" href="{{'/producedReports/' +
              reportObject.name}}" (click)="$event.stopPropagation()">
            </a>
            <button mat-icon-button matTooltip="Download this report"
              (click)="reportDownloadAnchor.click(); $event.
              stopPropagation()">
              <mat-icon class="fa fa-download"></mat-icon>
            </button>
            <button mat-icon-button matTooltip="Remove this report"
              (click)="removeReport(reportObject.name); $event.
              stopPropagation()">
              <mat-icon class="fa fa-trash"></mat-icon>
            </button>
          </span>
        </mat-expansion-panel-header>
        <ng-template matExpansionPanelContent>
          <ng-container *ngIf="reportObject.name.endsWith('.md') else
            notMarkdownReport">
            <pre
              style="font-family: Roboto, 'Helvetica Neue', sans-serif;">{{reports.
              get(reportObject)}}</pre>
          </ng-container>
          <ng-template #notMarkdownReport>
            <markdown [data]="reports.get(reportObject)"></markdown>
          </ng-template>
        </ng-template>
      </mat-expansion-panel>
    </ng-container>
  </mat-accordion>
</div>
