<div class="kt-item" matTooltip="{{treeRow.text}}"
  (click)="treeRow.rowSelected()"
  [ngClass]="{ 'selected-border': treeRow.isRowSelected(),
  'highlight-row': (treeRow.isRowRoot() && treeRow.visible && treeRow.matchesFilter) }"
  [ngStyle]="getIndentationStyle()">
  <i class="kt-icon fa"
    (click)="treeRow.expanded = !treeRow.expanded; treeRow.updateVisibleRows.next(true); $event.stopPropagation()"
    [ngClass]="{ 'fa-caret-down': (treeRow.hasChildren() && treeRow.expanded),
    'fa-caret-right': (treeRow.hasChildren() && !treeRow.expanded),
    'no-children': !treeRow.hasChildren() }">
  </i>
  <ng-container *ngIf="treeRow.icon">
    <mat-icon class="kt-icon {{treeRow.icon}}"></mat-icon>
  </ng-container>
  <ng-container *ngIf="!treeRow.icon">
    <span class="kt-icon no-icon"></span>
  </ng-container>
  <span style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
    {{treeRow.text}}
  </span>
  <ng-container *ngFor="let image of images">
    <ng-container *ngIf="image.display(treeRow)">
      <img src="{{image.path}}" title="{{image.text}}"/>
    </ng-container>
  </ng-container>
  <span id="rightSpan">
    <ng-container *ngIf="!treeRow.isRowRoot()">
      <button mat-icon-button
        (click)="treeRow.setRowAsRoot(); $event.stopPropagation()">
        <mat-icon class="fa fa-anchor"></mat-icon>
      </button>
    </ng-container>
    <ng-container *ngFor="let action of rowActions">
      <ng-container *ngIf="action.show(treeRow)">
        <button mat-icon-button matTooltip="{{action.description}}"
          (click)="action.perform(treeRow); $event.stopPropagation()">
          <mat-icon class="kt-icon {{action.icon}}"></mat-icon>
        </button> 
      </ng-container>
    </ng-container>
    <button mat-icon-button [matMenuTriggerFor]="menu"
      (click)="$event.stopPropagation()">
      <mat-icon class="fa fa-bars"></mat-icon>
    </button>
    <mat-menu #menu="matMenu" [overlapTrigger]="false">
      <button mat-menu-item *ngFor="let action of menuActions"
        (click)="action.perform(treeRow)" matTooltip="{{action.description}}"
        [disabled]="!action.enable(treeRow)">
        <mat-icon class="{{action.icon}}"></mat-icon>
        {{action.name}}
      </button>
    </mat-menu>
  </span>
</div>
