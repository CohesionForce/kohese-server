<div [ngStyle]="{ 'height': (isDialogInstance() ? '95%' : '100%') }">
  <div style="height: 5%; display: flex; flex-direction: row;">
    <mat-form-field style="width: 30%;">
      <mat-select placeholder="Document Configuration"
        [ngModel]="documentConfiguration"
        (ngModelChange)="documentConfiguration = $event">
        <ng-container *ngFor="let configuration of documentConfigurations">
          <mat-option [value]="configuration">
            {{configuration.name}}
          </mat-option>
        </ng-container>
      </mat-select>
    </mat-form-field>
    <button mat-icon-button matTooltip="Add a Document Configuration"
      (click)="editDocumentConfiguration(undefined)">
      <mat-icon class="fa fa-plus"></mat-icon>
    </button>
    <button mat-icon-button matTooltip="Edit this Document Configuration"
      [disabled]="!documentConfiguration" (click)="editDocumentConfiguration(
      documentConfiguration)">
      <mat-icon class="fa fa-edit"></mat-icon>
    </button>
    <button mat-icon-button matTooltip="Remove this Document Configuration"
      [disabled]="!documentConfiguration"
      (click)="removeSelectedDocumentConfiguration()">
      <mat-icon class="fa fa-trash"></mat-icon>
    </button>
    <button mat-icon-button matTooltip="Toggle outline" (click)="outlineDrawer.
      toggle()" class="flex-right-align" [disabled]="!documentConfiguration"
      [ngClass]="{ 'highlight': outlineDrawer.opened }">
      <mat-icon class="fa fa-list"></mat-icon>
    </button>
    <button mat-icon-button matTooltip="Toggle object editor"
      (click)="objectEditorDrawer.toggle()" [disabled]="!selectedItemProxy"
      [ngClass]="{ 'highlight': objectEditorDrawer.opened }">
      <mat-icon class="fa fa-pencil"></mat-icon>
    </button>
  </div>
  <mat-drawer-container style="height: 95%;">
    <mat-drawer #outlineDrawer mode="side" disableClose style="width: 25%;">
      <div style="height: 5%; display: flex; flex-direction: row;">
        <button mat-icon-button matTooltip="Add Items to the selected Document
          Configuration" class="flex-right-align" (click)="addToDocument()">
          <mat-icon class="fa fa-plus"></mat-icon>
        </button>
        <button mat-icon-button matTooltip="Link outline and document"
          [ngClass]="{ 'highlight': linkOutlineAndDocument }"
          (click)="linkOutlineAndDocument = !linkOutlineAndDocument">
          <mat-icon class="fa fa-exchange"></mat-icon>
        </button>
      </div>
      <ng-container *ngIf="documentConfiguration">
        <tree #outlineTree [root]="documentConfiguration"
          [getChildren]="getOutlineDocumentComponentChildren"
          [getText]="getDocumentComponentText"
          (elementSelected)="outlineDocumentComponentSelected($event.id)"
          [actions]="outlineActions" style="height: 95%;">
        </tree>
      </ng-container>
    </mat-drawer>
    <mat-drawer-content>
      <text-editor #textEditor [disabled]="!documentConfiguration || (Object.
        keys(documentConfiguration.components).length === 0)"
        [additionalToolbarButtons]="additionalToolbarButtonIds"
        [customizeEditor]="customizeEditor.bind(this)" [save]="save.bind(this)"
        (selectionChanged)="selectItem($event)"
        (contentChanged)="textEditorContentChanged($event)">
      </text-editor>
    </mat-drawer-content>
    <mat-drawer #objectEditorDrawer mode="side" position="end" disableClose
      style="width: 25%;">
      <ng-container *ngIf="selectedItemProxy">
        <div style="height: 5%; display: flex; flex-direction: row;">
          <button mat-icon-button matTooltip="Save this Item"
            class="flex-right-align" (click)="itemRepository.upsertItem(
            selectedItemProxy.kind, selectedItemProxy.item)">
            <mat-icon class="fa fa-save"></mat-icon>
          </button>
        </div>
        <object-editor [object]="selectedItemProxy.item"
          [type]="selectedItemProxy.model.item">
        </object-editor>
      </ng-container>
    </mat-drawer>
  </mat-drawer-container>
  <ng-container *ngIf="isDialogInstance()">
    <mat-dialog-actions style="height: 5%; display: flex;
      flex-direction: row;">
      <span class="flex-right-align">
        <button mat-button matTooltip="Propagate this configuration"
          [disabled]="!documentConfiguration" (click)="matDialogRef.close(
          documentConfiguration)">
          Apply
        </button>
        <button mat-button matTooltip="Cancel the document editing process"
          (click)="matDialogRef.close(undefined)">
          Cancel
        </button>
      </span>
    </mat-dialog-actions>
  </ng-container>
</div>
