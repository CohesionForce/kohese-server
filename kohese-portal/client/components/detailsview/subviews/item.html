
<span class="control-group">
  <label class="control-label" for="Ordered"> Ordered </label>
  <input type="checkbox" ng-checked="detailsCtrl.itemProxy.childrenAreManuallyOrdered()" ng-click="detailsCtrl.itemProxy.toggleChildrenAreManuallyOrdered()" />
</span>

<span class="pull-right">
      <span>Showing {{filteredItems.length}} of {{detailsCtrl.itemProxy.children.length}}</span>
      <input class="input-sm" type="text" ng-model="detailsCtrl.filterString" placeholder="Filter" style="margin: 5px"/>

    </span>
<table ui-tree class="table table-striped table-condensed table-hover">
    <thead>
    <th style="width:15px"></th>
    <th><a href="" ng-click="itemSortField = 'item.kind'">Kind</a></th>
    <th><a href="" ng-click="itemSortField = 'item.name'">Name</a></th>
    <th><a href="" ng-click="itemSortField = 'item.actionState'">State</a></th>
    <th><a href="" ng-click="itemSortField = 'item.assignedTo'">Assigned To</a></th>
    <th><a href="" ng-click="itemSortField = 'item.tags'">Tags</a></th>
    <th><a href="" ng-click="itemSortField = 'item.description'">Description</a></th>
    <th><i class="glyphicon glyphicon-plus pull-right"
           ng-click="detailsCtrl.navigateToCreateForm()"></i></th>
    </thead>
    <tbody ui-tree-nodes ng-model="detailsCtrl.itemProxy.children">
    <tr ui-tree-node ng-repeat="proxy in filteredItems = (detailsCtrl.itemProxy.children  | filter:{item: {$: detailsCtrl.filterString}}) | orderBy:itemSortField">
        <td><i ui-tree-handle class="fa fa-th" aria-hidden="true" ng-if="detailsCtrl.itemProxy.childrenAreManuallyOrdered()")></i></td>
        <td>{{proxy.kind}}</td>
        <td ng-click="detailsCtrl.updateTab(detailsCtrl.NavigationService.getCurrentState(detailsCtrl.tab.id), proxy.item.id)"
            class="tree-label"
            ng-bind-html="proxy.item.name | highlight:detailsCtrl.filterString"></td>
        <td>
            <span ng-if="proxy.kind==='Decision'">{{proxy.item.decisionState}}</span>
            <span ng-if="proxy.kind==='Action'">{{proxy.item.decisionState}}/{{proxy.item.actionState}}</span>
            <span ng-if="proxy.kind==='Task'">{{proxy.item.taskState}}</span>
            <span ng-if="proxy.kind==='Issue'">{{proxy.item.issueState}}</span>
        </td>
        <td>{{proxy.item.assignedTo}}</td>
        <td>{{proxy.item.tags}}</td>
        <td ng-class="{'trim-info': !showDescription, 'trim-info-visible': showDescription}"
            ng-dblclick="showDescription=!showDescription" ng-init="showDescription=false"
            ng-bind-html="proxy.item.description | highlight:detailsCtrl.filterString"></td>
        <td class="pull-right">
            <i class="glyphicon glyphicon-remove" ng-click="detailsCtrl.removeItem(proxy.item)"></i>
        </td>
    </tr>
    </tbody>
</table>
